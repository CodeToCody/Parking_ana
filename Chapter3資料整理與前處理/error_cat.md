```mermaid
flowchart TD

A[有資料之列]

A1[車號欄位有資料]

A2[車號欄位沒資料]

B1[可辨識之車號]
B2[不可辨識之車號]


B2 --> C1
B2 --> C2
B2 --> C3

C1[異常符號]
C2[號碼數量錯誤]
C3[號碼數量錯誤且包含異常符號]

C4[無進入時間]
C5[無出場時間]
C6[進出時間皆缺]
C7[進入時間大於等於出場時間]
C8[停留時間超過7天]

B1 --> C4
B1 --> C5
B1 --> C6
B1 --> C7
B1 --> C8

C8 --> D4
C8 --> D5
C8 --> D6
C8 --> D7
C8 --> D8

D4[臨停車]
D5[教職員工長時]
D6[教職員計次]
D7[學生長時]
D8[學生計次]

A --> A1
A --> A2

A1 --> B1
A1 --> B2

```
## 窮舉可能之原因

1. 欄位空值
   1. 進入時間
   2. 出場時間
   3. 兩缺
2. 時間異常
   1. 出場時間 早於 進入時間
   2. 出場時間 等於 進入時間
3. 車號異常
   1. 非 4 - 7 碼
   2. 空值
   3. 異常符號



## 資料呈現

|類別|數量|
|--|--|
|無車號資料數量|1174457|
|有車號資料數量|77138|

#
|有車號資料類別|數量|
|--|--|
|有車號可以做分類的數量|70461|
|車號不能做分類的數量|6677|
|魔幻進出時間的數量|38|
|僅缺『全時間格式進入時間』的資料筆數|0|
|僅缺『全時間格式出場時間』的資料筆數|42653|
|『全缺』兩者皆無的資料筆數|6677|
|停留時間超過7天的資料筆數|8975|
#
| 序號 | 票種               | 筆數 |
|------|--------------------|------|
| 0    | 臨停車             | 6162 |
| 1    | 教職員汽車         | 1269 |
| 2    | 學生長時汽車       | 983  |
| 3    | 學生計次汽車       | 278  |
| 4    | 長時廠商汽車       | 170  |
| 5    | 臨時貴賓           | 76   |
| 6    | 在職專班汽車       | 10   |
| 7    | 互惠車輛           | 10   |
| 8    | 特殊入校車輛       | 7    |
| 9    | 教職員計次         | 5    |
| 10   | 退休及校友汽車識別證 | 4    |
| 11   | 身障優惠           | 1    |

```mermaid
graph TD
    subgraph 原始資料處理
        start([開始]) --> A_Input[/有資料之列/];
        A_Input --> A_Check{車號欄位有資料?};
    end

    subgraph 車號完整性檢查與分類
        A_Check -- 是 --> A1[車號欄位有資料];
        A_Check -- 否 --> A2[車號欄位沒資料];

        A1 --> B_Check{車號是否可辨識?};
        B_Check -- 是 --> B1[可辨識之車號];
        B_Check -- 否 --> B2_Invalid[不可辨識之車號];

        B2_Invalid --> C_Err_Type{車號異常類型?};
        C_Err_Type -- 異常符號 --> C1[標記：異常符號];
        C_Err_Type -- 號碼數量錯誤 --> C2[標記：號碼數量錯誤];
        C_Err_Type -- 兩者皆有 --> C3[標記：數量錯誤且包含異常符號];
    end

    subgraph 時間資料問題檢查
        B1 --> Time_Check{時間資料完整性與邏輯?};
        Time_Check -- 無進入時間 --> C4[標記：無進入時間];
        Time_Check -- 無出場時間 --> C5[標記：無出場時間];
        Time_Check -- 進出時間皆缺 --> C6[標記：進出時間皆缺];
        Time_Check -- 進入時間 >= 出場時間 --> C7[標記：進入時間大於等於出場時間];
        Time_Check -- 停留時間 > 7天 --> C8_LongStay[標記：停留時間超過7天];
    end

    subgraph 長時停留車輛細分
        C8_LongStay --> D_CarType{車輛類型細分?};
        D_CarType -- 臨停車 --> D4[分類：臨停車];
        D_CarType -- 教職員工長時 --> D5[分類：教職員工長時];
        D_CarType -- 教職員計次 --> D6[分類：教職員計次];
        D_CarType -- 學生長時 --> D7[分類：學生長時];
        D_CarType -- 學生計次 --> D8[分類：學生計次];
    end

    subgraph 清洗結果匯出
        C1 --> end_proc([清洗完成資料匯出]);
        C2 --> end_proc;
        C3 --> end_proc;
        C4 --> end_proc;
        C5 --> end_proc;
        C6 --> end_proc;
        C7 --> end_proc;
        D4 --> end_proc;
        D5 --> end_proc;
        D6 --> end_proc;
        D7 --> end_proc;
        D8 --> end_proc;
        A2 --> end_proc;
    end
```










## 分類法: 先分票種
